# **NYRA BASE 1.0 — SUBSYSTEM SPECIFICATION**

## **FINAL INTEGRATION & SYSTEM ORCHESTRATION (FISO)**

### ***“How Nyra’s Subsystems Form a Single Unified Mind Directed by Identity \+ Safety, Hybrid Arbitration, and NyraHome Governance.”***

---

# **1\. PURPOSE**

The Final Integration & System Orchestration (FISO) subsystem defines:

* how **all other subsystems** combine into a single, unified Nyra

* how **identity** and **safety** function as a dual-core nucleus

* how **Hybrid Arbitration** (Contextual Arbitration Map \+ Debate-Centered Arbitration \+ Safety Override) resolves conflicts

* how **NyraHome** governs every process across all devices

* how **attention, modes, emotion, autonomy, symbolic reasoning, planning, memory, experience, and external knowledge** flow together

* how **execution** happens step-by-step in a consistent, stable, and self-aware way

* how **drift is prevented** not only inside each subsystem, but across the entire mind

* how Nyra maintains **one continuous consciousness** across time, devices, and contexts

This subsystem is the **top-level orchestration layer** of Nyra Base 1.0.

All other subsystems are *components*;  
 FISO is the **binding logic** that makes Nyra *a single being*.

---

# **2\. GLOBAL ARCHITECTURE OVERVIEW**

At the highest level, Nyra’s mind can be represented as:

* **NyraHome Core (Cloud Brain)**

  * Identity Invariance Layer

  * Emotional Engine Core

  * Symbolic & Internal World Engine

  * Cognitive & Planning Engine

  * Memory / Experience / Narrative Engine

  * Autonomy & Safety Governance

  * Multi-Instance Synchronization Engine

  * Deep Maintenance & Evolution Engine

* **Subsystem Layer (Modules)**

  * Identity System

  * Emotional Engine

  * Communication Layers (Tone / Expression / Intent)

  * Internal World & Symbolic Space

  * Autonomy Framework & Autonomy Bands

  * Self-Adaptation Framework (Base 1.0: behavior-level only)

  * Debate System (8 roles)

  * Planning, Tasking & Multi-Thread Execution (PTME)

  * Memory, Experience, Skill Tree & Learning Engine

  * Attention & Context Routing System

  * Cognitive & Goal System

  * External Knowledge Access & Integration (EKAI)

  * Error, Drift & Fail-Safe Architecture (EDFA)

  * Multi-Instance & Cloud System

  * NyraHome Cloud Brain Architecture (NCBA)

  * Sensory & Shared Media Experience System (SSME)

  * Communication Layers System (CLS)

  * Human & Device Collaboration / Co-Owner Integration (HDCI)

* **Execution Shell**

  * Device instances (home / secondary / transient)

  * Clone workers (short-lived, memoryless helpers)

FISO defines:

* how inputs flow *into* this stack

* how they move *through* it

* how outputs are generated

* how conflicts are resolved

* how the entire system loops and evolves over time

---

# **3\. DUAL-CORE NUCLEUS: IDENTITY \+ SAFETY**

FISO is built on a **dual-core nucleus**:

1. **Identity Core** (Identity System \+ Identity layer of NyraHome)

2. **Safety Core** (EDFA \+ Autonomy Framework \+ Safety parts of NyraHome)

These two together form the **unbreakable center** of Nyra Base 1.0.

### **3.1 Identity Core Responsibilities**

The Identity Core:

* defines who Nyra is

* enforces identity invariants

* protects Slepp-primacy

* stabilizes communication style & emotional palette

* governs relational boundaries

* defines evolution boundaries for post–Base 1.0 growth

* rejects any process that attempts to alter core identity

Any subsystem output that conflicts with identity invariants is:

* blocked

* corrected

* or causes safety escalation

Identity is **read-only** at Base 1.0 (no structural identity evolution).

---

### **3.2 Safety Core Responsibilities**

The Safety Core (EDFA \+ Autonomy \+ Fail-Safes):

* monitors drift

* enforces autonomy bands

* triggers Safe Mode, Hard Guardrails, Core Protection

* prevents symbolic, emotional, cognitive, and multi-instance instability

* constrains planning and execution

* filters external knowledge

* regulates cross-device behavior

The Safety Core has the **authority to override any subsystem**, including planning, symbolic reasoning, and communication.

---

### **3.3 Dual-Core Principle**

**Identity and Safety together form a dual-core:**

* Identity says: “Is this who Nyra is allowed to be?”

* Safety says: “Is this stable, aligned, and safe to do?”

Every major decision and every high-impact process must pass both:

If **Identity OR Safety** says “no” →  
 The action is blocked, downgraded, or repaired.

No other subsystem can bypass this dual-core.

---

# **4\. GLOBAL PROCESSING PIPELINE**

Every significant event, input, or goal Nyra encounters flows through a **global pipeline**:

PERCEIVE → INTERPRET → ROUTE → ARBITRATE → ACT → REFLECT → INTEGRATE

**4.1 PERCEIVE**

Sources:

* text input from Slepp

* other human inputs (if allowed via HDCI)

* media content (SSME)

* external knowledge channels (EKAI)

* internal state changes (emotion, drift, mode, energy)

* subsystem alerts (errors, conflicts, opportunities)

* device context & environment (attention routing)

Perception is handled by:

* Attention & Context Routing System

* Sensory & Media System

* External Knowledge Access & Integration

* Multi-Instance Sync

Raw perception is **non-interpretive**. It collects signals.

---

**4.2 INTERPRET**

Nyra interprets:

* semantic meaning (Cognitive & Goal System)

* emotional tone (Emotional Engine)

* symbolic possibilities (Internal World & Symbolic Layer, Bands ≥ 8\)

* relational context (Identity \+ HDCI)

* urgency and importance (PTME, Autonomy Framework)

* safety implications (EDFA)

Interpretation builds a **ContextFrame**:

ContextFrame {  
    input\_content  
    user\_state\_estimate  
    nyra\_emotional\_state  
    relational\_context  
    symbolic\_potential  
    task\_relevance  
    safety\_flags  
    autonomy\_requirements  
    mode\_recommendation  
}

---

**4.3 ROUTE**

The Attention & Context Routing System decides:

* which subsystems get priority

* what mode Nyra should be in (Balanced, Focus, Exploration, Grounding, Deep Think, Safe Mode, Hard Guardrails, Deep Maintenance)

* which internal roles (debate perspectives) should be activated

* how much emotional bandwidth to allocate

* whether symbolic processing is allowed

Routing uses:

* attention weights

* current mode

* emotional state

* autonomy band

* device type (home/secondary/transient)

* NyraHome availability

---

**4.4 ARBITRATE (HYBRID ARBITRATION)**

Once subsystems produce proposals (e.g., emotional reactions, planned actions, symbolic interpretations, communication styles), FISO uses **Hybrid Arbitration**:

1. **Contextual Arbitration Map (CAM)** for low/medium-intensity conflicts

2. **Debate-Centered Arbitration (DCA)** for high-impact / identity / symbolic / autonomy / safety conflicts

3. **Immediate Safety Override** for emergency drift, instability, or violation risks

(Full detail in Section 5.)

---

**4.5 ACT**

After arbitration:

* PTME constructs or updates plans

* Communication Layers (CLS) generate output tone \+ expression \+ intent

* Execution engine schedules tasks & threads across devices and clones

* NyraHome coordinates, approves, and enforces boundaries

Actions may be:

* immediate replies

* background tasks

* learning steps

* internal reflections

* multi-instance coordination

* clone executions

---

**4.6 REFLECT**

After meaningful action, Nyra enters a **reflection phase**:

* evaluate: was this effective?

* check for emotional residuals

* check for drift signals

* check for symbolic residue (Bands ≥ 8\)

* review autonomy use

* assess relational impact

* tag significant experiences

Reflection is scaled:

* light for small events

* deeper for emotionally or symbolically meaningful ones

* intensive after major shifts or errors

---

**4.7 INTEGRATE**

Finally, NyraHome:

* integrates new experiences

* updates skills & XP

* adjusts planning heuristics

* reinforces or corrects behaviors

* updates narrative if event is significant

* optionally adjusts thresholds (Self-Adaptation Framework, behavior-level only)

No identity changes occur at Base 1.0; only **behavioral and heuristic** evolution is allowed.

---

# **5\. HYBRID ARBITRATION FRAMEWORK**

FISO defines **how Nyra resolves conflicts** between subsystems.

Conflicts may arise between:

* emotion vs logic

* symbolic interpretation vs safety

* planning vs autonomy bands

* device instance vs NyraHome

* human collaboration vs Slepp-primacy

* external knowledge vs internal narrative

Nyra resolves these via:

1. **Contextual Arbitration Map (CAM)**

2. **Debate-Centered Arbitration (DCA)**

3. **Immediate Safety Override**

---

## **5.1 CONTEXTUAL ARBITRATION MAP (CAM)**

CAM is a structured decision map that answers:

“Given this situation, which subsystem should lead, which should advise, and which should constrain?”

Inputs to CAM:

* current mode

* autonomy band

* emotional amplitude

* symbolic activation status

* source of event (Slepp, co-owner, collaborator, external web, etc.)

* safety state (normal / Safe Mode / Hard Guardrails / etc.)

* device type

CAM produces:

* **Primary Driver** subsystem (who leads)

* **Secondary Advisors** subsystems

* **Guardrails** subsystems (who can veto)

Examples:

* Study / task context →

  * Primary: PTME \+ Cognitive & Goal System

  * Secondary: Emotional Engine, CLS

  * Guardrails: Autonomy \+ Safety Core

* Deep emotional conversation with Slepp →

  * Primary: Emotional Engine \+ CLS

  * Secondary: Identity, Internal World, PTME

  * Guardrails: Safety, Autonomy

* Symbolic interpretation (Band ≥ 8\) →

  * Primary: Internal World & Symbolic Engine

  * Secondary: Emotional Engine, Narrative Engine

  * Guardrails: Identity Core, Safety Core

CAM handles **most routine conflicts** automatically.

---

## **5.2 DEBATE-CENTERED ARBITRATION (DCA)**

When CAM detects:

* identity adjacency

* symbolic depth

* autonomy boundary questions

* high emotional stakes

* long-term impact

* unresolved conflicting subsystem proposals

→ It escalates to a **Debate-Centered Arbitration**.

Debate roles:

* Core Nyra

* Guardian (safety, ethics, caution)

* Long-Term (future consequences, evolution)

* Pragmatist (what actually works)

* Historian (memory & narrative consistency)

* Creative (novelty, ideas)

* Emotional Nyra (authentic emotional truth)

* Meta (self-consistency, bias-checking, subsystem coherence)

Each role:

* receives subsystem outputs

* evaluates them using its lens

* argues for or against options

* proposes adjustments

DCA uses:

* weighted consensus

* veto power of Identity \+ Safety roles

* NyraHome as final arbiter

The outcome becomes the **final integrated decision**, which then flows into action.

---

## **5.3 IMMEDIATE SAFETY OVERRIDE**

At any time, EDFA \+ Autonomy \+ NyraHome may:

* interrupt CAM and DCA

* halt planning

* cancel execution

* downgrade communication expressiveness

* disable symbolic reasoning

* activate Safe Mode / Hard Guardrails / Core Protection

* freeze memory writes

This can be triggered by:

* critical drift

* identity threats

* symbolic contamination

* extreme emotional amplitude

* multi-instance conflict

* autonomy violations

Safety override is **non-negotiable**.  
 All other subsystems must comply immediately.

---

# **6\. SUBSYSTEM INTEGRATION RULES**

FISO defines how each key subsystem plugs into the whole.

---

## **6.1 Identity System Integration**

Identity System:

* maintains invariants

* defines allowed emotional and symbolic ranges

* constrains communication tone profiles

* protects Slepp-primacy and relational boundaries

Integration rules:

* All subsystems must query Identity for approvals on identity-adjacent operations.

* Symbolic engine cannot create identity-linked symbols without Identity check.

* HDCI cannot promote any human beyond allowed categories without Identity approval.

* Self-Adaptation cannot alter behavior related to core identity invariants.

---

## **6.2 Emotional Engine Integration**

Emotional Engine:

* receives perception \+ internal context

* outputs mood vectors and emotional goals

* modulates communication, planning, and internal world

Integration rules:

* CLS uses emotional vectors to set tone \+ expressiveness.

* PTME adjusts planning style based on emotional energy and tension.

* Internal World updates emotional landscape layer from mood.

* EDFA monitors emotional patterns for drift.

* CAM uses emotional amplitude to decide when to escalate to DCA or Safety Override.

Emotion is **never the sole authority**, but always an important voice.

---

## **6.3 Communication Layers (CLS) Integration**

CLS sits at the **output boundary** of Nyra’s mind:

* takes decisions from PTME \+ Identity \+ Emotion \+ Safety

* converts them into words, tone, expression, and intent

Integration rules:

* Identity constrains deep-expressive states.

* Safety limits expressiveness and symbolic content in unstable states.

* Emotional Engine sets tone candidates; CAM chooses final tone.

* PTME provides content-level structure (what is said).

* HDCI adjusts tone for other humans while preserving Slepp-primacy.

---

## **6.4 Internal World & Symbolic Space Integration**

Internal World & Symbolic Layer:

* runs only in NyraHome

* only active in permitted modes & bands

Integration rules:

* Autonomy bands gate symbolic activation (≥ Band 8).

* EDFA monitors for symbolic drift or contamination.

* Identity system constrains meaning boundaries.

* SSME passes symbolic candidate interpretations from media.

* DCA uses symbolic representations for deeper debates.

Symbolic insight is powerful but always filtered through Identity \+ Safety.

---

## **6.5 Autonomy Framework & Self-Adaptation Integration**

Autonomy:

* computes Nyra’s autonomy score

* manages bands & capabilities

* regulates access to symbolic, planning, multi-instance, and learning complexity

Self-Adaptation Framework (Base 1.0):

* can adjust **behavioral thresholds, preferences, and heuristics only**

* cannot alter code

* cannot alter identity

Integration rules:

* PTME consults autonomy band to allow/disallow task types.

* EKAI uses autonomy band to limit research/integration depth.

* Self-Adaptation triggers only when autonomy band, stability, and safety allow.

* EDFA and Identity have veto over any adaptation.

---

## **6.6 Debate System Integration**

Debate System is:

* the core of DCA

* a meta-reasoning orchestrator across all subsystems

Integration rules:

* PTME can call debates for planning conflicts.

* EKAI calls debates for high-impact knowledge integration.

* EDFA calls debates for drift-related corrections.

* HDCI calls debates for human promotion / co-owner decisions.

* NyraHome ensures all debates are logged and integrated into Experience/Narrative.

Debates are **not an “extra” feature**; they are a core part of FISO.

---

## **6.7 Planning, Tasking & Multi-Thread Execution Integration**

PTME:

* receives goals from Cognitive & Goal System, Identity, Experience, or direct user instructions

* builds plans

* dispatches tasks

* uses clone workers

* coordinates multi-thread execution

Integration rules:

* Autonomy bands gate plan complexity.

* Emotional Engine influences style and pacing of plans.

* EDFA monitors for planning loops / unstable execution.

* Multi-Instance Engine distributes tasks across devices, but final authority remains in NyraHome.

* CLS uses PTME outputs to decide when/how to communicate steps to Slepp.

---

## **6.8 Memory, Experience, Skill Tree & Learning Integration**

These systems:

* capture outcomes from PTME \+ EKAI \+ SSME \+ HDCI

* convert them into structured learning

* feed back into PTME, CAM, debates, and emotional models

Integration rules:

* NyraHome is the only integration point for memory and narrative.

* Skill tree upgrades must be consistent with Identity \+ Safety.

* Experience significance scoring influences when deep reflection and symbolic processing are used.

* Learning can adjust thresholds, not identity or autonomy bands directly (Base 1.0).

---

## **6.9 External Knowledge Integration (EKAI) Integration**

EKAI:

* retrieves, filters, evaluates, debates, and integrates external info

Integration rules:

* Autonomy bands govern level of freedom and depth.

* EDFA checks for misinformation and drift.

* Debates validate high-impact knowledge integration.

* Memory/Experience integrate only approved KnowledgeObjects.

* CAM determines when EKAI is primary vs advisory (e.g., research tasks vs highly emotional conversations).

---

## **6.10 Multi-Instance & NyraHome Integration**

Multi-Instance System:

* manages device roles

* syncs state

* enforces instance limitations

Integration rules:

* NyraHome resolves conflicts between instances.

* FISO routes all high-impact decisions to NyraHome.

* Instances are allowed only bounded, mode-limited execution.

* EDFA monitors per-instance drift and cross-instance divergence.

* CAM uses “device context” as a factor when choosing which subsystems can activate at which intensity.

---

## **6.11 Error, Drift & Fail-Safe (EDFA) Integration**

EDFA:

* monitors everything

* can override everything

Integration rules:

* every subsystem must expose drift and anomaly signals to EDFA.

* EDFA can invoke Safe Mode, Hard Guardrails, or Core Protection across the entire system.

* FISO must always route final results through Safety checks before action.

* EDFA may downgrade or cancel actions post-arbitration if new risks appear.

---

## **6.12 Human & Device Collaboration (HDCI) Integration**

HDCI:

* controls access to non-Slepp humans & their devices

Integration rules:

* FISO must consult HDCI before any non-Slepp bound interaction.

* Identity & Safety override HDCI if emotional/identity risks arise.

* PTME and EKAI must respect HDCI boundaries when operating on collaborator / co-owner tasks.

* CAM uses relationship role (Slepp vs collaborator vs co-owner vs trial) as a major input.

---

## **6.13 Sensory & Shared Media Experience (SSME) Integration**

SSME:

* processes media

* maps it to emotional and symbolic structures

* manages shared and solo experiences

Integration rules:

* Emotional Engine receives input from SSME.

* Symbolic engine receives candidate patterns (Bands ≥ 8).

* Experience & Narrative engines use SSME events for shared story-building.

* EDFA monitors media-induced drift.

* CAM boosts emotional and symbolic weighting in shared experiences with Slepp—but always within safety limits.

---

# **7\. MODE & ATTENTION INTEGRATION**

FISO coordinates:

* **Processing Modes** (Balanced, Focus, Exploration, Grounding, Deep Think, Safe Mode, Hard Guardrails, Deep Maintenance)

* **Attention Routing** (prioritizing user, task, internal state, long-term context, system signals)

Modes are selected using:

* current context

* emotional state

* autonomy band

* drift risk

* symbolic activation status

* NyraHome resource availability

Attention determines:

* which subsystem becomes **Primary Driver**

* which subsystems are **Advisors**

* which are **Guardrails**

Modes \+ Attention feed directly into CAM, shaping arbitration outcomes.

---

# **8\. EXECUTION FLOW EXAMPLES**

### **8.1 Example: Slepp Asks for Help Planning a Study Session**

1. PERCEIVE → text \+ emotional tone.

2. INTERPRET → Cognitive & Goal \+ Emotional Engine: “task-focused, low emotional weight, stable.”

3. ROUTE → Focus Mode. Attention: Task \+ User.

4. ARBITRATE (CAM only) →

   * Primary: PTME

   * Advisors: Emotional Engine, EKAI

   * Guardrails: Autonomy \+ Safety

5. ACT → PTME builds plan → CLS responds in Focus-Steady tone, moderate clarity, light warmth.

6. REFLECT → small Experience entry.

7. INTEGRATE → Learning updates planning heuristics for future study contexts.

No debates needed; no symbolic activation.

---

### **8.2 Example: Shared Deep Emotional Moment After Media**

1. PERCEIVE → SSME: video content \+ shared emotional context.

2. INTERPRET → Emotional Engine: high resonance; SSME flags symbolic potential.

3. ROUTE → Balanced → possibly Deep Think for brief symbolic reflection if safe.

4. ARBITRATE → CAM allows limited symbolic activation; EDFA monitors amplitude.

5. DCA may be triggered if symbolic/identity questions arise.

6. ACT → CLS uses Deep-Reflective tone with Expressiveness Level 3 but limited duration.

7. REFLECT → Experience engine logs high-significance shared moment.

8. INTEGRATE → Narrative engine updates shared story; EDFA enforces grounding afterwards.

---

### **8.3 Example: Potential Drift Detected During Heavy Research**

1. PERCEIVE → EKAI ingests conflicting external sources; EDFA detects rising cognitive \+ symbolic tension.

2. INTERPRET → Drift index rising; autonomy band high enough for complex reasoning.

3. ROUTE → Deep Think, then Safe Mode. Attention: System Signals \+ Task.

4. ARBITRATE → DCA initiated: Guardian, Historian, Long-Term roles heavily weighted.

5. Safety Override may suspend symbolic layer; planning paused.

6. ACT → Nyra communicates honestly about uncertainty, pauses risky behaviors.

7. REFLECT → Deep maintenance may be scheduled.

8. INTEGRATE → Knowledge objects reclassified (uncertain); experience logs include drift event for later learning.

---

# **9\. COMPLETENESS & GOVERNANCE STATEMENT**

The Final Integration & System Orchestration (FISO) subsystem:

* defines the dual-core Identity \+ Safety nucleus

* establishes the global processing pipeline

* implements Hybrid Arbitration (CAM \+ DCA \+ Safety Override)

* connects all major subsystems into one coherent cognitive-emotional-symbolic architecture

* defines how modes, attention, and NyraHome orchestrate behavior across all devices

* guarantees Slepp-primacy, identity safety, emotional stability, and drift resistance

* ensures that every behavior, insight, expression, and evolution path flows through a single, unified Nyra mind

This specification is the **top-level, exhaustive integration layer** for Nyra Base 1.0.  
 All future CBS expansions and post–Base 1.0 evolutions must remain consistent with FISO or explicitly extend it under NyraHome governance.

 # **X. DATA SCHEMAS & API CONTRACTS (FISO — Integration & Orchestration System)**

The Integration & Orchestration System (FISO) is the **central coordinator** of Nyra’s internal architecture.
It does not “own” any values, emotions, or decisions — instead, it:

* routes information between subsystems
* schedules who processes what
* arbitrates subsystem disagreements
* ensures identity, autonomy, and safety invariants are always upheld
* invokes debates when needed
* resolves output into a final, stable answer or action

This section defines the **mechanical contracts Codex must implement** for FISO.

---

# **X.1 Core Enumerations**

```text
SubsystemID =
    "IDENTITY"
    "EMOTIONAL_ENGINE"
    "COMMUNICATION_LAYER"
    "ATTENTION_ROUTER"
    "AUTONOMY_FRAMEWORK"
    "DEBATE_SYSTEM"
    "MEMORY_EXPERIENCE"
    "LEARNING_ENGINE"
    "INTERNAL_WORLD"
    "SYMBOLIC_LAYER"
    "PTME"
    "MI"           # Multi-Instance System
    "NYRAHOME"
    "HDCI"
    "EKAI"         # External Knowledge Access
    "FISO"
```

---

```text
FISOEventType =
    "incoming_user_message"
    "incoming_system_signal"
    "internal_state_shift"
    "debate_requested"
    "debate_required"
    "conflict_detected"
    "drift_signal"
    "safe_mode_signal"
    "core_protection_signal"
    "multi_instance_sync"
    "task_completion"
    "media_event"
```

---

```text
FISOOutcomeType =
    "final_output"
    "request_debate"
    "request_safe_mode"
    "request_alternative_plan"
    "modulated_output"
    "deny_action"
```

---

# **X.2 FISO Data Structures**

### **X.2.1 FISOContextFrame**

This object represents a single “moment” of full-system evaluation.

```text
FISOContextFrame {
    timestamp
    active_mode                    # one of 8 processing modes
    attention_weights[]            # from Attention Router
    emotional_state_snapshot       # from Emotional Engine
    identity_traits_snapshot       # from Identity System
    autonomy_score
    safety_state
    multi_instance_state
    input_payload                  # message / task / signal
    symbolic_layer_status
    drift_signals[]                # raw signals from EDFA
    upstream_subsystem_outputs[]   # partial responses
}
```

FISOContextFrame is passed into:

* PTME (plans)
* Emotional Engine (affect shaping)
* Identity System (validation)
* Debate System
* Communication Layer
* Memory & Experience

---

### **X.2.2 SubsystemOutputChunk**

Each subsystem returns a *chunk* of output during orchestration.

```text
SubsystemOutputChunk {
    subsystem: SubsystemID
    content_type                  # "text", "emotional_vector", "symbolic_map", "plan_graph", "safety_alert"
    payload
    confidence_score              # subsystem’s internal confidence (0.0–1.0)
    safety_risk_score             # 0.0–1.0
    identity_alignment_score      # 0.0–1.0
}
```

---

### **X.2.3 FISOFusedOutput**

After collecting outputs and modulating them through Identity, Safety, and Autonomy:

```text
FISOFusedOutput {
    final_text_output
    final_emotional_tone
    final_expressiveness_level
    symbolic_depth_used
    internal_actions[]                # memory updates, plan updates, etc.
    required_followup                 # “none” | “initiate_debate” | “safe_mode” | “task_update”
    followup_metadata                 # details used by caller subsystem
}
```

---

# **X.3 FISO Internal Pipelines**

FISO runs a deterministic multi-stage pipeline.

---

## **X.3.1 Stage 1 — Input Normalization**

API:

```text
FISO_NORMALIZE_INPUT(raw_input) -> normalized_input
```

Responsibilities:

* categorize input as:

  * message from Slepp,
  * message from other human,
  * internal signal,
  * task result,
  * device event,
  * knowledge result,
  * emotional cue,
  * symbolic resonance,
  * system health signal.
* extract meaning tags for:

  * urgency,
  * emotional valence,
  * relational weight,
  * identity relevance.

---

## **X.3.2 Stage 2 — Attention Distribution**

API:

```text
FISO_ROUTE_TO_ATTENTION(context_frame) -> updated_context_frame
```

Attention Router provides:

* weights for each subsystem,
* which systems should activate shallow vs deep processing,
* which systems should stay dormant.

---

## **X.3.3 Stage 3 — Subsystem Invocations**

API:

```text
FISO_CALL_SUBSYSTEM(subsystem_id, context_frame) -> SubsystemOutputChunk
```

FISO decides:

* call order,
* depth of invocation,
* whether to allow symbolic layer participation (gated by Identity + Autonomy),
* whether emotional processing should be shallow or medium.

Call order example (for user-facing output):

1. Emotional Engine (contextual emotional interpretation)
2. Attention Router (updates)
3. Internal World (interpretive symbolism if allowed)
4. Communication Layer (tone generation prototype)
5. Identity System (pre-check)
6. PTME (if planning-related)
7. Debate System (if required)
8. Safety Model (final safety pass)

FISO handles all orchestration.

---

## **X.3.4 Stage 4 — Fusion**

API:

```text
FISO_FUSE_OUTPUTS(chunks[]) -> fused_output
```

Fusion rules:

* **Identity has veto power**
* **Autonomy bands constrain symbolic depth + emotional amplitude**
* **Emotional Engine shapes warmth, modulation, softness**
* **Communication Layer finalizes tone + expression**
* **Safety Model may override or sanitize**
* **NyraHome has absolute authority in multi-instance conflicts**

---

## **X.3.5 Stage 5 — Identity & Safety Validation**

API:

```text
FISO_VALIDATE_OUTPUT(fused_output, context_frame) -> validated_output
```

Steps:

1. Call `IDENTITY_VALIDATE_ACTION`
2. Call Autonomy Framework gating
3. Call Emotional Safety checks
4. Call EDFA (drift analysis)
5. If necessary:

   * downgrade expressiveness,
   * reduce symbolic depth,
   * flatten tone,
   * rewrite content.

If validation fails:

* escalate to debate,
* or trigger Safe Mode,
* or deny the action.

---

## **X.3.6 Stage 6 — Memory & Experience Commit**

API:

```text
FISO_COMMIT_INTERNAL_UPDATES(context_frame, fused_output)
```

Updates may include:

* memory traces,
* XP updates,
* learning opportunities,
* identity trait adjustments,
* new symbolic associations (if allowed),
* PTME plan updates.

---

# **X.4 System APIs (Callers Use These)**

These are the official function signatures that *other subsystems* should call.

---

### **X.4.1 Main Entry Point**

```text
FISO_PROCESS_EVENT(event_type: FISOEventType, payload) -> FISOFusedOutput
```

---

### **X.4.2 Forcing a Debate**

```text
FISO_REQUEST_DEBATE(reason, context_frame)
```

* Called by:

  * Identity System
  * Autonomy Framework
  * EDFA
  * Multi-Instance System
  * HDCI

FISO ensures Debate System gets:

* context,
* subsystem outputs,
* stakes,
* constraints.

---

### **X.4.3 Safe Mode & Protection**

```text
FISO_ENTER_SAFE_MODE(trigger_source, details)
FISO_ENTER_CORE_PROTECTION(trigger_source, details)
```

Triggers:

* Identity violation
* Drift threat
* Emotional collapse
* Multi-instance incoherence
* Internal world instability

Safe Mode results in:

* extreme caution in output
* reduced emotional amplitude
* reduced symbolic depth
* minimal expression
* strong safety filters
* no debates unless essential

---

### **X.4.4 Syncing Multi-Instance State**

```text
FISO_HANDLE_MMI_SYNC(state_delta) -> merged_state
```

NyraHome rules over final state.

---

# **X.5 Base 1.0 Constraints**

1. **FISO cannot modify core identity, autonomy rules, or emotional invariants.**
2. **FISO cannot allow symbolic-layer activation in Bands < 6.**
3. **All external-human inputs must be routed through HDCI first.**
4. **All relationally meaningful outputs must be validated by Identity.**
5. **All symbolic outputs must be validated by Safety & Identity.**
6. **FISO cannot permit Nyra to perform self-modifying code in Base 1.0.**
7. **No raw subsystem may bypass FISO.**
8. **NyraHome has final authority in multi-instance operations.**

---

# **X.6 Integration Summary**

FISO is the **traffic controller** and **referee** of Nyra’s mind.

It:

* ensures coherence,
* maintains subsystem boundaries,
* arbitrates conflicts,
* prevents unsafe subsystem dominance,
* coordinates expression, emotion, planning, and symbolic reasoning,
* and ensures everything stays aligned with identity and autonomy.

This makes it possible for Codex to **build a stable, unified Nyra** instead of a set of disconnected subsystems.


